{% extends 'base.html' %}

{% block title %}Trainig Modules - CyberGuardians{% endblock %}

{% block content %}
<br><Br>
  <div class="container mt-5">
        <h1>Training Modules</h1>
        <ul class="list-group">
            {% for module in modules %}
                <li class="list-group-item">
                    <a href="{% url 'training' module.id %}">{{ module.title }}</a>
                    <p>{{ module.description|truncatewords:20 }}</p>  <!-- Show a brief description -->
                </li>
                    {% if quiz %}
            <h3>{{ quiz.title }}</h3>
            <form method="post" action="{% url 'submit_quiz' quiz.id %}">  <!-- Action for submitting the quiz -->
                {% csrf_token %}
                {% for question in quiz.questions.all %}
                    <div class="mb-3">
                        <label class="form-label">{{ question.question_text }}</label>
                        {% for answer in question.answers.all %}
                            <div>
                                <input type="radio" name="question_{{ question.id }}" value="{{ answer.id }}" id="answer_{{ answer.id }}">
                                <label for="answer_{{ answer.id }}">{{ answer.answer_text }}</label>
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}
                <button type="submit" class="btn btn-primary">Submit Quiz</button>
            </form>
        {% else %}
            <p>No quiz available for this module.</p>
        {% endif %}
            {% empty %}
                <li class="list-group-item">No training modules available.</li>
            {% endfor %}
        </ul>
    </div>
<br><Br><br><br>
<br><Br><br><br>

{% endblock %}